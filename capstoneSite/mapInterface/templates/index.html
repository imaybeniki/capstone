<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Map Interface</title>
		<style>
			html, body {
				margin: 0;
				padding: 0;
				height: 100%;
			}
			#map {
				position: absolute; 
				width: 100%;
				top: 75px;
				bottom: 0;
				background-color: grey;
			}
			#header {
				border: 2px solid #044879;
				background-color: #044879;
				color: #fff;
				font-weight: bold;
				font-family: sans-serif;
				font-size: 1.6em;
				width: 100%;
				height: 71px;
			}
		</style>
    </head>
    <body>
		<div id="header">
			<p>Map Interface - Capstone</p>
		</div>
		<div id="map"></div>
		<script>
			function initMap() {
				var markerList = [];
				var centerPoint = {lat: {{ center.lat }}, lng: {{ center.long }}};
				var map = new google.maps.Map(document.getElementById('map'), {
				  zoom: 6,
				  center: centerPoint
				});
				var infoString = '';
				var marker;
				var infoWindow = new google.maps.InfoWindow();
				var i = 0;
			
				{% for row in rows %}
					infoString = '<h1>{{ row.0 }}</h1>';
				 	marker = new google.maps.Marker({
						title: '{{ row.0 }}',
						position: {lat: {{ row.1 }}, lng: {{ row.2 }}},
						map: map
					});
					markerList.push(marker);
				{% endfor %}
				// Set listeners for info windows and corresponding markers
				
				for (var i = 0, cmarker; cmarker = markerList[i]; i++) {
					google.maps.event.addListener(cmarker, 'click', function(e) {
						infoWindow.setContent('Marker position: ' + this.getPosition());
						infoWindow.open(map, this);
					});
				}
				google.maps.event.trigger(map, "resize");
			}
		</script>
		<script async defer
			src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDaost6qz9iVMLOo5pgaay3I2HlaBywDy0&callback=initMap">
		</script>
    </body>
</html>

